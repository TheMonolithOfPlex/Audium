<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Settings - WhisperX</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="dark">
  <div class="sidebar">
    <div class="logo">WhisperX</div>
    <nav>
      <a href="/">Dashboard</a>
      <a href="/history">Uploads</a>
      <a href="/settings" class="active">Settings</a>
      <a href="/analytics">Analytics</a>
      <a href="/log">Log</a>
      <a href="/admin">Admin</a>
      {% if session.get('username') %}
        <a href="/logout">Logout</a>
      {% else %}
        <a href="/login">Login</a>
      {% endif %}
    </nav>
  </div>

  <div class="main">
    <header class="topbar">
      <span>Welcome, {{ session.get('username', 'Guest') }}</span>
    </header>

    <div class="card">
      <h2>User Preferences</h2>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="flash-messages">
            {% for category, message in messages %}
              <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <form method="POST" action="/update_settings">
        <label for="email">Notification Email</label>
        <input type="email" id="email" name="email" placeholder="you@example.com" required />

        <label for="language">Default Transcription Language</label>
        <select id="language" name="language">
          <option value="en">English</option>
          <option value="es">Spanish</option>
          <option value="fr">French</option>
          <option value="de">German</option>
          <option value="zh">Chinese</option>
          <option value="ja">Japanese</option>
        </select>

        <label class="checkbox-toggle">
          <input type="checkbox" name="auto_delete" />
          Automatically delete uploaded files after transcription
        </label>

        <button type="submit">Save Settings</button>
      </form>
    </div>
  </div>
</body>
</html>
